<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBBYiiD8XSVnbCc96hv5GTLhM-8VHuQgbc&v=3.exp&libraries=visualization,places"></script>

<script>
    var autocomplete;
    function initialize() {

        autocomplete = new google.maps.places.Autocomplete(
                (document.getElementById('autocomplete')),
                {types: ['geocode']});

        autocomplete.addListener('place_changed', fillInAddress);
    }

    function fillInAddress() {
        var place = autocomplete.getPlace();
        console.log(place.geometry.location.lat());
        console.log(place.geometry.location.lng());


//        var marker = new google.maps.Marker({
//            position: {lat: place.geometry.location.lat(), lng: place.geometry.location.lng()},
//            map: map,
//            title: 'Hello World!'
//        });
        //$('#autocomplete').val('');
    }

    google.maps.event.addDomListener(window, 'load', initialize);

    function getCoordinates(){
        var coordinates = autocomplete.getPlace();
        $('#lng').val(coordinates.geometry.location.lng());
        $('#lat').val(coordinates.geometry.location.lat());
        $('#search_form').submit();
    }

</script>


<div class="container" style="margin-top: 40px;">
    <div class="col-lg-1"></div>
    <div class="col-lg-10">
        <%= form_for :user, url: { action: 'search' }, html: { id: 'search_form' } do %>
            <input id="autocomplete" placeholder="Enter Location.. " size="50px;">
            <input class="input-group" placeholder="Start Date" size="20">
            <input class="input-group" placeholder="End Date" size="20">
            <input type="hidden" name="lng" id="lng">
            <input type="hidden" name="lat" id="lat">
            <button class="btn btn-success" type="button" onclick="getCoordinates();">Find a Sitter</button>
        <% end %>
    </div>
    <div class="col-lg-1"></div>
</div>




<div class="container">
    <div class="col-lg-2"></div>
    <div class="col-lg-8">
        <div id="locationField">

        </div>
    </div>
    <div class="col-lg-2"></div>
</div>


